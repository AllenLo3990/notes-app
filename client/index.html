<!doctype html>
<html lang="en" ng-app="application">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Foundation for Apps</title>
  <link href="/assets/css/app.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
  <script src="/assets/js/foundation.js"></script>
  <script src="/assets/js/templates.js"></script>
  <script src="/assets/js/routes.js"></script>
  <script src="/assets/js/app.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"></script>

  <script>
  // problems right now:
  // fix the entire code

  $(document).ready( function(){
    var noteID = 0;
    var menuHeight = document.getElementById('menu').offsetHeight;

    $("#addNote").click(function(){
      $("#removeAll").data("cancel",true);
      $("#addNote").hide();
      $("#canvas").prepend("<h1 id='add-to-canvas'>Add your note to the blank space. </h1>");
      $("#canvas").on("click",function(e){
        var newTop = e.pageY-menuHeight;
        var newLeft = e.pageX;
        if (newTop+140 >= $(window).height()-menuHeight){
          newTop = $(window).height()-menuHeight-200;
        }
        if (newLeft+140 >= $(window).width()){
          newLeft = $(window).width()-200;
        }
        $("#add-to-canvas").after("<div class='note' style='top:"+newTop+"px; left:"+newLeft+"px;' id='"+noteID+"'><div class='noteTitle'>Sticky Notes</div><textarea class='noteTextArea' placeholder='Text Here...'></textarea></div>");
        $("#"+noteID).draggable({
          containment: "#canvas",
          opacity: 0.7
        });
        noteID++;
        $("#canvas").off("click");
        $("#add-to-canvas").remove();
        $("#addNote").show();
        $("#removeAll").data("cancel",false);
      });
    });

    $("#removeAll").click(function(){
      if (!($("#removeAll").data("cancel"))) {
        $(".note").remove();
        noteID = 0;
      }else{
        $("#canvas").off("click");
        $("#add-to-canvas").remove();
        $("#addNote").show();
        $("#removeAll").data("cancel",false);
      }
    });
  });

  </script>

  <style>

  .note {
    width:250px;
    height:250px;
    background:#FFFF99;
    position: absolute;
    overflow:hidden;
    /*box-shadow:4px 4px 8px #1c1c1c;
    -webkit-box-shadow:4px 4px 8px #1c1c1c;
    -moz-box-shadow:4px 4px 8px #1c1c1c;
    -o-box-shadow:4px 4px 8px #1c1c1c;*/
  }

  /*.note:active{
  	box-shadow:8px 8px 16px #1c1c1c;
  	-webkit-box-shadow:8px 8px 16px #1c1c1c;
  	-moz-box-shadow:8px 8px 16px #1c1c1c;
  	-o-box-shadow:8px 8px 16px #1c1c1c;
  }*/

  .noteTitle {
    text-align:center;
	  font-weight:bold;
    font-family:arial;
    padding:10px 0px 10px 0px;
    /*box-shadow:0px 4px 4px rgba(0, 0, 0, 0.3);
    -webkit-box-shadow:0px 4px 4px rgba(0, 0, 0, 0.3);
    -moz-box-shadow:0px 4px 4px rgba(0, 0, 0, 0.3);
    -o-box-shadow:0px 4px 4px rgba(0, 0, 0, 0.3);*/
  }

  .noteTextArea{
    width:100%;
    height:84%;
    border:0px;
    resize:none;
    background:transparent;
    padding:10px;
  }

  .noteTextArea::-webkit-scrollbar{width:0;}

  </style>

</head>
<body>
  <div class="grid-frame vertical">
    <div class="grid-content shrink collapse" id="menu">
      <div class="menu-group primary">
        <div class="menu-group-left">
          <ul class="primary menu-bar">
            <li><a><strong>Foundation for Apps</strong></a></li>
            <li><a id="addNote"><strong>+</strong></a></li>
          </ul>
        </div>
        <div class="menu-group-right">
          <ul class="primary menu-bar">
            <li><a id="removeAll"><strong>x</strong></a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="grid-block" id="canvas">
    </div>
  </div>
</body>
</html>
